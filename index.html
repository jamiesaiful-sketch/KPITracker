<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WOB Editorial Pageview KPI Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Comic+Neue:wght@400;700&family=Press+Start+2P&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #334155;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
            flex-direction: column;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2.5rem;
        }

        /* Mobile-first layout for progress items */
        .progress-item-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        /* Desktop layout for progress items */
        @media (min-width: 640px) {
            .progress-item-container {
                flex-direction: row;
                align-items: center;
            }
        }

        .progress-content-wrapper {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            width: 100%;
        }

        .stick-figure-avatar {
            width: 4rem;
            height: 4rem;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* Animation for the male stick figure */
        @keyframes azri-dance {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(5deg); }
            100% { transform: rotate(0deg); }
        }

        /* Animation for the female stick figures */
        @keyframes renu-didi-dance {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-5deg); }
            100% { transform: rotate(0deg); }
        }

        .avatar-azri {
            animation: azri-dance 1s ease-in-out infinite;
        }

        .avatar-renu-didi {
            animation: renu-didi-dance 1.2s ease-in-out infinite;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            font-weight: 600;
        }

        .progress-bar-bg {
            width: 100%;
            height: 2rem;
            background-color: #e2e8f0;
            border-radius: 9999px;
            overflow: hidden;
            border: 2px solid #cbd5e0;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-bar-fill {
            height: 100%;
            border-radius: 9999px;
            transition: width 1s ease-in-out;
            background-image: linear-gradient(to right, #4c51bf, #434190);
        }

        /* Colors for the main progress bar */
        .progress-high {
            background-image: linear-gradient(to right, #22c55e, #10b981);
        }
        .progress-medium {
            background-image: linear-gradient(to right, #facc15, #f59e0b);
        }
        .progress-low {
            background-image: linear-gradient(to right, #ef4444, #dc2626);
        }
        
        /* Colors for the stick figure */
        .fill-high {
            fill: #22c55e;
            stroke: #22c55e;
        }
        .fill-medium {
            fill: #facc15;
            stroke: #facc15;
        }
        .fill-low {
            fill: #ef4444;
            stroke: #ef4444;
        }

        /* Text bubble styles */
        .message-bubble {
            position: relative;
            background-color: #ede9fe;
            padding: 1rem;
            border-radius: 1rem;
            margin-top: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            max-width: 80%;
        }
        
        .message-bubble p {
            font-family: 'Comic Neue', sans-serif;
            font-weight: bold;
        }

        .message-bubble::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 20%;
            transform: translateX(-10px);
            border-width: 0 10px 10px 10px;
            border-style: solid;
            border-color: transparent transparent #ede9fe transparent;
        }

        /* Collapsible section styles */
        .collapsible-container {
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
            max-height: 0;
            padding: 0 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            color: #4a5568;
            background-color: #f4e6f9;
            box-shadow: none;
            border: none;
        }

        .collapsible-container.open {
            max-height: 1000px;
            padding: 0.75rem 1rem;
        }
        
        .toggle-btn {
            background-color: #7c3aed;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 600;
            border-radius: 9999px;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s, transform 0.2s;
        }
        
        .toggle-btn:hover {
            background-color: #6d28d9;
        }

        .toggle-btn .arrow {
            transition: transform 0.3s ease-in-out;
            fill: currentColor;
        }

        .toggle-btn.open .arrow {
            transform: rotate(180deg);
        }
        .font-comic {
            font-family: 'Comic Neue', sans-serif;
        }

        .text-green-500 {
            color: #22c55e;
        }

        .text-red-500 {
            color: #ef4444;
        }

        /* New styles for the evolution section */
        .evolution-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 0.5rem;
            padding: 1rem 0;
        }
        
        .evolution-section + .evolution-section {
            border-top: 1px dashed #c0a1de;
            margin-top: 1rem;
            padding-top: 1rem;
        }

        .evolution-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .evolution-icon {
            font-size: 2rem;
        }
        
        .evolution-arrow {
            font-size: 1.5rem;
            color: #4a5568;
        }
        
        .evolution-arrow.up {
            color: #2f855a;
        }
        
        .evolution-arrow.down {
            color: #c53030;
        }
        
        .percentage-diff {
            font-family: 'Press Start 2P', cursive;
            font-size: 1rem;
            text-shadow: 1px 1px #cbd5e0;
            margin-bottom: 0.5rem;
            color: #4a5568;
        }

        .evolution-text {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.7rem;
            text-shadow: 1px 1px #cbd5e0;
        }

        .evolution-status {
            font-family: 'Press Start 2P', cursive;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            margin-top: 0.25rem;
        }
        
        .status-positive {
            background-color: #2f855a;
            color: white;
        }

        .status-negative {
            background-color: #c53030;
            color: white;
        }

        .status-stable {
            background-color: #4a5568;
            color: white;
        }
    </style>
</head>
<body>

<div class="container">
    <h1 class="text-3xl font-bold text-center mb-6">WOB Editorial KPI Progress September 2025</h1>
    <div id="progress-container">
        <!-- Progress bars will be injected here by JavaScript -->
    </div>
</div>

<script>
    const data = [
        // Updated data with Week 2 and Week 3 pageviews
        { name: 'Azri', pageview: 1100000, julyPageview: 675920, augustPageview: 1089746, septemberPageview: 229795, augustWeek1Pageview: 119602, septemberWeek1Pageview: 78534, augustWeek2Pageview: 126053, septemberWeek2Pageview: 15305, augustWeek3Pageview: 290607, septemberWeek3Pageview: 129800 },
        { name: 'Renu', pageview: 850000, julyPageview: 284807, augustPageview: 453898, septemberPageview: 305225, augustWeek1Pageview: 94927, septemberWeek1Pageview: 92364, augustWeek2Pageview: 124129, septemberWeek2Pageview: 102009, augustWeek3Pageview: 125992, septemberWeek3Pageview: 107045 },
        { name: 'Didi', pageview: 600000, julyPageview: 394760, augustPageview: 347769, septemberPageview: 254607, augustWeek1Pageview: 89901, septemberWeek1Pageview: 64408, augustWeek2Pageview: 65505, septemberWeek2Pageview: 87312, augustWeek3Pageview: 81786, septemberWeek3Pageview: 100491 }
    ];

    function getProgressColor(progress) {
        if (progress >= 90) {
            return 'progress-high';
        } else if (progress >= 50) {
            return 'progress-medium';
        } else {
            return 'progress-low';
        }
    }

    function getStickFigureColor(progress) {
        if (progress >= 90) {
            return 'fill-high';
        } else if (progress >= 50) {
            return 'fill-medium';
        } else {
            return 'fill-low';
        }
    }

    function getStickFigureEmoji(progress) {
        if (progress >= 90) {
            return '😊'; // Happy emoji
        } else if (progress >= 50) {
            return '😐'; // Neutral emoji
        } else {
            return '😞'; // Sad emoji
        }
    }

    function getMotivationalMessage(progress, name) {
        if (name === 'Azri') {
            if (progress >= 90) {
                return "Steady lah, Azri! Pageviews padu giler bossku. Onz! 🎉";
            } else if (progress >= 50) {
                return "Nice one, Azri! You're halfway there, takdehal lahhh. Keep it up! 👏";
            } else {
                return "Chill lahh, Azri. Journey tu masih jauh. We got this! 🚀";
            }
        } else if (name === 'Renu') {
            if (progress >= 90) {
                return "Cun giler, Renu! Your content is onz fire. Next level! 🔥";
            } else if (progress >= 50) {
                return "Solid, Renu! Almost there. Onzzz, push lagi sikit. 💪";
            } else {
                return "Takpe, Renu. Slow and steady. Tak kalut. We'll get there! ✨";
            }
        } else if (name === 'Didi') {
            if (progress >= 90) {
                return "Fuyoh, Didi! Your pageviews so high, just like your spirit. Padu! 🤩";
            } else if (progress >= 50) {
                return "Mantap, Didi! More than half the way. Let's go! 💃";
            } else {
                return "Jangan risau, Didi. Takdehal! The grind is real. Kita onz je. 😉";
            }
        }
        return "Keep up the great work!";
    }

    function createStickFigureSVG(item) {
        const colorClass = getStickFigureColor(item.progress);
        const emoji = getStickFigureEmoji(item.progress);

        if (item.name === 'Renu' || item.name === 'Didi') {
            // Female stick figure with a dancing dress and feet
            return `
                <svg class="w-16 h-16" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <!-- Dress -->
                    <path d="M45 50 L35 85 L65 85 L55 50 Z" class="${colorClass}" fill="none" stroke-width="4" stroke-linejoin="round" />
                    <!-- Left Arm (up) -->
                    <line x1="45" y1="50" x2="35" y2="40" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Right Arm (out) -->
                    <line x1="55" y1="50" x2="65" y2="40" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Left Leg -->
                    <line x1="45" y1="85" x2="40" y2="95" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Right Leg -->
                    <line x1="55" y1="85" x2="60" y2="95" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Emoji for the head -->
                    <text x="50" y="35" font-size="40" text-anchor="middle">${emoji}</text>
                </svg>
            `;
        } else {
            // Male stick figure with a dancing suit
            return `
                <svg class="w-16 h-16" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <!-- Body (suit) -->
                    <path d="M40 45 L50 55 L60 45 L60 70 L40 70 Z" class="${colorClass}" fill="none" stroke-width="4" stroke-linejoin="round" />
                    <!-- Left Arm (up) -->
                    <line x1="40" y1="50" x2="30" y2="35" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Right Arm (down) -->
                    <line x1="60" y1="50" x2="70" y2="65" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Left Leg (out) -->
                    <line x1="45" y1="70" x2="35" y2="85" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Right Leg (straight) -->
                    <line x1="55" y1="70" x2="55" y2="90" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Emoji for the head -->
                    <text x="50" y="35" font-size="40" text-anchor="middle">${emoji}</text>
                </svg>
            `;
        }
    }

    function createEvolutionSection(augustViews, septemberViews) {
        const change = ((septemberViews - augustViews) / augustViews) * 100;
        const roundedChange = change.toFixed(2);

        let initialIcon = '😐';
        let finalIcon;
        let evolutionText;
        let statusClass;

        if (change >= 0) {
            finalIcon = '😁';
            evolutionText = `Fuh, mantap giler! Stats naik padu!`;
            statusClass = 'status-positive';
        } else if (change > -5) {
            finalIcon = '😬';
            evolutionText = `Takde hal, steady je! Sikit je tu, kita push lagi!`;
            statusClass = 'status-stable';
        } else {
            finalIcon = '😥';
            evolutionText = `Alamak, tak onz ni! Kena grind lagi ni, guys!`;
            statusClass = 'status-negative';
        }

        return `
            <div class="evolution-section">
                <div class="flex justify-between w-full mb-4">
                    <span class="text-sm font-comic">August: <b>${augustViews.toLocaleString()}</b></span>
                    <span class="text-sm font-comic">September: <b>${septemberViews.toLocaleString()}</b></span>
                </div>
                <div class="percentage-diff ${change > 0 ? 'text-green-500' : 'text-red-500'} font-bold">
                    ${change > 0 ? '+' : ''}${roundedChange}%
                </div>
                <div class="evolution-container">
                    <span class="evolution-icon">${initialIcon}</span>
                    <span class="text-2xl font-bold mx-2">→</span>
                    <span class="evolution-icon">${finalIcon}</span>
                </div>
                <span class="evolution-status ${statusClass}">${change > 0 ? 'Evolution' : (change > -5 ? 'Stable' : 'Devolution')}</span>
                <p class="evolution-text text-gray-700 mt-2">${evolutionText}</p>
            </div>
        `;
    }

    function renderProgressBar(item) {
        // Calculate the progress based on current pageview (September)
        const progress = (item.septemberPageview / item.pageview) * 100;
        
        const itemContainer = document.createElement('div');
        itemContainer.className = 'progress-item-container';

        const avatarDiv = document.createElement('div');
        avatarDiv.className = `stick-figure-avatar ${item.name === 'Azri' ? 'avatar-azri' : 'avatar-renu-didi'}`;
        // Pass the dynamically calculated progress to the SVG creator
        avatarDiv.innerHTML = createStickFigureSVG({ ...item, progress: progress });
        itemContainer.appendChild(avatarDiv);

        const progressContentWrapper = document.createElement('div');
        progressContentWrapper.className = 'progress-content-wrapper';

        const labelDiv = document.createElement('div');
        labelDiv.className = 'progress-label';
        labelDiv.innerHTML = `
            <span>${item.name}</span>
            <span>${progress.toFixed(2)}%</span>
        `;
        progressContentWrapper.appendChild(labelDiv);
        
        const barBgDiv = document.createElement('div');
        barBgDiv.className = 'progress-bar-bg';

        const barFillDiv = document.createElement('div');
        // Use the calculated progress to determine the color
        barFillDiv.className = `progress-bar-fill ${getProgressColor(progress)}`;
        barFillDiv.style.width = '0%';
        barBgDiv.appendChild(barFillDiv);
        progressContentWrapper.appendChild(barBgDiv);

        const pageviewDiv = document.createElement('div');
        pageviewDiv.className = 'text-sm text-gray-500 mt-1';
        pageviewDiv.innerHTML = `Current pageview: <b>${item.septemberPageview.toLocaleString()}</b>/<b>${item.pageview.toLocaleString()}</b>`;
        progressContentWrapper.appendChild(pageviewDiv);

        const messageBubble = document.createElement('div');
        messageBubble.className = 'message-bubble';

        const messageDiv = document.createElement('p');
        messageDiv.className = 'text-sm font-medium';
        messageDiv.textContent = getMotivationalMessage(progress, item.name);
        messageBubble.appendChild(messageDiv);
        progressContentWrapper.appendChild(messageBubble);

        // --- Combined Collapsible Section for both weeks ---
        const combinedToggle = document.createElement('button');
        combinedToggle.className = 'toggle-btn mt-4';
        combinedToggle.innerHTML = `
            <span class="mr-2">Performance vs August</span>
            <svg class="arrow w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
            </svg>
        `;
        progressContentWrapper.appendChild(combinedToggle);
        
        const combinedContent = document.createElement('div');
        combinedContent.className = 'collapsible-container';
        
        // Add week 3 section with heading
        const week3Section = document.createElement('div');
        week3Section.innerHTML = `<h3 class="text-xl font-bold mb-4 text-center">Week 3</h3>`;
        week3Section.innerHTML += createEvolutionSection(item.augustWeek3Pageview, item.septemberWeek3Pageview);
        combinedContent.appendChild(week3Section);
        
        // Add week 2 section with heading
        const week2Section = document.createElement('div');
        week2Section.innerHTML = `<h3 class="text-xl font-bold mb-4 text-center">Week 2</h3>`;
        week2Section.innerHTML += createEvolutionSection(item.augustWeek2Pageview, item.septemberWeek2Pageview);
        combinedContent.appendChild(week2Section);

        // Add week 1 section with heading
        const week1Section = document.createElement('div');
        week1Section.innerHTML = `<h3 class="text-xl font-bold mb-4 text-center">Week 1</h3>`;
        week1Section.innerHTML += createEvolutionSection(item.augustWeek1Pageview, item.septemberWeek1Pageview);
        combinedContent.appendChild(week1Section);

        progressContentWrapper.appendChild(combinedContent);

        // Add event listener to toggle the single collapsible section
        combinedToggle.addEventListener('click', () => {
            combinedToggle.classList.toggle('open');
            combinedContent.classList.toggle('open');
        });

        itemContainer.appendChild(progressContentWrapper);
        progressContainer.appendChild(itemContainer);

        setTimeout(() => {
            barFillDiv.style.width = `${progress}%`;
        }, 100);
    }

    const progressContainer = document.getElementById('progress-container');

    // Sort data based on September percentage in descending order
    data.sort((a, b) => (b.septemberPageview / b.pageview) - (a.septemberPageview / a.pageview));

    // Render the progress bars
    data.forEach(renderProgressBar);
</script>

</body>
</html>
