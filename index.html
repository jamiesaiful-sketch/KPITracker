<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WOB Editorial Pageview KPI tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
            color: #334155;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2.5rem;
        }

        .progress-item-container {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .progress-content-wrapper {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .stick-figure-avatar {
            width: 4rem;
            height: 4rem;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* Animation for the male stick figure */
        @keyframes azri-dance {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(5deg); }
            100% { transform: rotate(0deg); }
        }

        /* Animation for the female stick figures */
        @keyframes renu-didi-dance {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-5deg); }
            100% { transform: rotate(0deg); }
        }

        .avatar-azri {
            animation: azri-dance 1s ease-in-out infinite;
        }

        .avatar-renu-didi {
            animation: renu-didi-dance 1.2s ease-in-out infinite;
        }


        .progress-label {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            font-weight: 600;
        }

        .progress-bar-bg {
            width: 100%;
            height: 2rem;
            background-color: #e2e8f0;
            border-radius: 9999px;
            overflow: hidden;
            border: 2px solid #cbd5e0;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-bar-fill {
            height: 100%;
            border-radius: 9999px;
            transition: width 1s ease-in-out;
            background-image: linear-gradient(to right, #4c51bf, #434190);
        }

        /* Colors for the main progress bar */
        .progress-high {
            background-image: linear-gradient(to right, #22c55e, #10b981);
        }
        .progress-medium {
            background-image: linear-gradient(to right, #facc15, #f59e0b);
        }
        .progress-low {
            background-image: linear-gradient(to right, #ef4444, #dc2626);
        }
        
        /* Colors for the stick figure */
        .fill-high {
            fill: #22c55e;
            stroke: #22c55e;
        }
        .fill-medium {
            fill: #facc15;
            stroke: #facc15;
        }
        .fill-low {
            fill: #ef4444;
            stroke: #ef4444;
        }

        /* Evolution Section Styles */
        .evolution-section {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            margin-top: 2rem;
        }
        .evolution-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            text-align: center;
        }
        .evolution-figures {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }
        .evolution-figure-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }
        .evolution-arrow {
            width: 3rem;
            height: 3rem;
        }
        .text-green-600 { color: #22c55e; }
        .text-red-600 { color: #ef4444; }

    </style>
</head>
<body>

<div class="container">
    <h1 class="text-3xl font-bold text-center mb-6">WOB Editorial KPI Progress September 2025</h1>
    <div id="progress-container">
        <!-- Progress bars will be injected here by JavaScript -->
    </div>

    <div id="pageview-comparison-section" class="mt-8 border-t-2 border-gray-200 pt-6">
        <h2 class="text-xl font-semibold mb-4 text-center">Pageview Comparison (July vs. August)</h2>
        <div id="evolution-container" class="evolution-section">
            <!-- Evolution visuals will be injected here -->
        </div>
    </div>
</div>

<script>
    const data = [
        { name: 'Azri', pageview: 1100000, julyPageview: 675920, augustPageview: 1089746, septemberPageview: 81123 },
        { name: 'Renu', pageview: 850000, julyPageview: 284807, augustPageview: 453898, septemberPageview: 101781 },
        { name: 'Didi', pageview: 600000, julyPageview: 394760, augustPageview: 347769, septemberPageview: 73232 }
    ];

    function getProgressColor(progress) {
        if (progress >= 90) {
            return 'progress-high';
        } else if (progress >= 50) {
            return 'progress-medium';
        } else {
            return 'progress-low';
        }
    }

    function getStickFigureColor(progress) {
        if (progress >= 90) {
            return 'fill-high';
        } else if (progress >= 50) {
            return 'fill-medium';
        } else {
            return 'fill-low';
        }
    }

    function getStickFigureEmoji(progress) {
        if (progress >= 90) {
            return 'üòä'; // Happy emoji
        } else if (progress >= 50) {
            return 'üòê'; // Neutral emoji
        } else {
            return 'üòû'; // Sad emoji
        }
    }

    function createStickFigureSVG(item, isEvolved = false) {
        const colorClass = getStickFigureColor(item.progress);
        const emoji = getStickFigureEmoji(item.progress);

        if (item.name === 'Renu' || item.name === 'Didi') {
            if (isEvolved && item.name === 'Didi') {
                // Devolved Didi
                 return `
                    <svg class="w-16 h-16" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 40 L40 70 L60 70 L50 40 Z" class="fill-low" fill="none" stroke-width="4" stroke-linejoin="round" />
                        <line x1="45" y1="45" x2="35" y2="35" class="fill-low" stroke-width="4" stroke-linecap="round" />
                        <line x1="55" y1="45" x2="65" y2="35" class="fill-low" stroke-width="4" stroke-linecap="round" />
                        <line x1="45" y1="70" x2="40" y2="80" class="fill-low" stroke-width="4" stroke-linecap="round" />
                        <line x1="55" y1="70" x2="60" y2="80" class="fill-low" stroke-width="4" stroke-linecap="round" />
                        <text x="50" y="30" font-size="40" text-anchor="middle">üò≠</text>
                    </svg>
                `;
            } else if (isEvolved && item.name === 'Renu') {
                // Evolved Renu
                return `
                    <svg class="w-16 h-16" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50 40 L30 85 L70 85 L50 40 Z" class="fill-high" fill="none" stroke-width="5" stroke-linejoin="round" />
                        <line x1="45" y1="50" x2="25" y2="40" class="fill-high" stroke-width="5" stroke-linecap="round" />
                        <line x1="55" y1="50" x2="75" y2="40" class="fill-high" stroke-width="5" stroke-linecap="round" />
                        <line x1="45" y1="85" x2="40" y2="95" class="fill-high" stroke-width="5" stroke-linecap="round" />
                        <line x1="55" y1="85" x2="60" y2="95" class="fill-high" stroke-width="5" stroke-linecap="round" />
                        <text x="50" y="35" font-size="40" text-anchor="middle">‚ú®</text>
                    </svg>
                `;
            }
            // Female stick figure with a dancing dress and feet
            return `
                <svg class="w-16 h-16" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <!-- Dress -->
                    <path d="M45 50 L35 85 L65 85 L55 50 Z" class="${colorClass}" fill="none" stroke-width="4" stroke-linejoin="round" />
                    <!-- Left Arm (up) -->
                    <line x1="45" y1="50" x2="35" y2="40" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Right Arm (out) -->
                    <line x1="55" y1="50" x2="65" y2="40" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Left Leg -->
                    <line x1="45" y1="85" x2="40" y2="95" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Right Leg -->
                    <line x1="55" y1="85" x2="60" y2="95" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Emoji for the head -->
                    <text x="50" y="35" font-size="40" text-anchor="middle">${emoji}</text>
                </svg>
            `;
        } else {
            if (isEvolved) {
                // Evolved Azri
                return `
                    <svg class="w-16 h-16" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <path d="M40 40 L50 50 L60 40 L60 70 L40 70 Z" class="fill-high" fill="none" stroke-width="5" stroke-linejoin="round" />
                        <line x1="40" y1="45" x2="30" y2="30" class="fill-high" stroke-width="5" stroke-linecap="round" />
                        <line x1="60" y1="45" x2="70" y2="30" class="fill-high" stroke-width="5" stroke-linecap="round" />
                        <line x1="45" y1="70" x2="35" y2="85" class="fill-high" stroke-width="5" stroke-linecap="round" />
                        <line x1="55" y1="70" x2="65" y2="85" class="fill-high" stroke-width="5" stroke-linecap="round" />
                        <text x="50" y="30" font-size="40" text-anchor="middle">üí™</text>
                    </svg>
                `;
            }
            // Male stick figure with a dancing suit
            return `
                <svg class="w-16 h-16" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <!-- Body (suit) -->
                    <path d="M40 45 L50 55 L60 45 L60 70 L40 70 Z" class="${colorClass}" fill="none" stroke-width="4" stroke-linejoin="round" />
                    <!-- Left Arm (up) -->
                    <line x1="40" y1="50" x2="30" y2="35" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Right Arm (down) -->
                    <line x1="60" y1="50" x2="70" y2="65" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Left Leg (out) -->
                    <line x1="45" y1="70" x2="35" y2="85" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Right Leg (straight) -->
                    <line x1="55" y1="70" x2="55" y2="90" class="${colorClass}" stroke-width="4" stroke-linecap="round" />
                    <!-- Emoji for the head -->
                    <text x="50" y="35" font-size="40" text-anchor="middle">${emoji}</text>
                </svg>
            `;
        }
    }

    function createSvgElementFromString(svgString) {
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = svgString.trim();
      return tempDiv.firstChild;
    }

    // Function to get the correct emoji for evolution/devolution
    function getEvolutionEmoji(percentageChange) {
        if (percentageChange > 0) {
            return 'ü•≥'; // Party face for positive change
        } else if (percentageChange < 0) {
            return 'üò≠'; // Crying face for negative change
        } else {
            return '‚ÜîÔ∏è'; // Left-right arrow for no change
        }
    }
    
    function renderProgressBar(item) {
        // Calculate the progress based on current pageview (September)
        const progress = (item.septemberPageview / item.pageview) * 100;
        
        const itemContainer = document.createElement('div');
        itemContainer.className = 'progress-item-container';

        const avatarDiv = document.createElement('div');
        avatarDiv.className = `stick-figure-avatar ${item.name === 'Azri' ? 'avatar-azri' : 'avatar-renu-didi'}`;
        // Pass the dynamically calculated progress to the SVG creator
        avatarDiv.innerHTML = createStickFigureSVG({ ...item, progress: progress });
        itemContainer.appendChild(avatarDiv);

        const progressContentWrapper = document.createElement('div');
        progressContentWrapper.className = 'progress-content-wrapper';

        const labelDiv = document.createElement('div');
        labelDiv.className = 'progress-label';
        labelDiv.innerHTML = `
            <span>${item.name}</span>
            <span>${progress.toFixed(2)}%</span>
        `;
        progressContentWrapper.appendChild(labelDiv);
        
        const barBgDiv = document.createElement('div');
        barBgDiv.className = 'progress-bar-bg';

        const barFillDiv = document.createElement('div');
        // Use the calculated progress to determine the color
        barFillDiv.className = `progress-bar-fill ${getProgressColor(progress)}`;
        barFillDiv.style.width = '0%';
        barBgDiv.appendChild(barFillDiv);
        progressContentWrapper.appendChild(barBgDiv);

        const pageviewDiv = document.createElement('div');
        pageviewDiv.className = 'text-sm text-gray-500 mt-1';
        pageviewDiv.innerHTML = `Current pageview: <b>${item.septemberPageview.toLocaleString()}</b>/<b>${item.pageview.toLocaleString()}</b>`;
        progressContentWrapper.appendChild(pageviewDiv);

        itemContainer.appendChild(progressContentWrapper);
        progressContainer.appendChild(itemContainer);

        setTimeout(() => {
            barFillDiv.style.width = `${progress}%`;
        }, 100);
    }

    function renderEvolutionSummary() {
        // Create a new array with calculated percentage change
        const evolutionData = data.map(item => {
            const diff = item.augustPageview - item.julyPageview;
            const percentageChange = (diff / item.julyPageview) * 100;
            return {
                ...item,
                percentageChange
            };
        });

        // Sort the new array based on percentage change in descending order
        evolutionData.sort((a, b) => b.percentageChange - a.percentageChange);

        evolutionData.forEach(item => {
            const diff = item.augustPageview - item.julyPageview;
            const changeType = diff >= 0 ? 'Evolution' : 'Devolution';
            const changeColor = diff >= 0 ? 'text-green-600' : 'text-red-600';
            const arrowSVG = diff >= 0 ? 
                `<svg class="evolution-arrow fill-current text-green-600" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L12 22M5 10L12 3L19 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>` :
                `<svg class="evolution-arrow fill-current text-red-600" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 22L12 2M5 14L12 21L19 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;

            const evolutionItem = document.createElement('div');
            evolutionItem.className = 'evolution-item';
            
            const figuresContainer = document.createElement('div');
            figuresContainer.className = 'evolution-figures';
            
            // July Figure using emoji
            const julyFigureContainer = document.createElement('div');
            julyFigureContainer.className = 'evolution-figure-container';
            const julyLabel = document.createElement('span');
            julyLabel.textContent = 'July 2025';
            const julyPageviews = document.createElement('span');
            julyPageviews.className = 'text-sm font-semibold';
            julyPageviews.textContent = item.julyPageview.toLocaleString();
            const julyEmojiElement = document.createElement('span');
            // Calculate progress for July to select the correct emoji
            const julyProgress = (item.julyPageview / item.pageview) * 100;
            julyEmojiElement.textContent = getStickFigureEmoji(julyProgress);
            julyEmojiElement.className = 'text-4xl';
            julyFigureContainer.appendChild(julyEmojiElement);
            julyFigureContainer.appendChild(julyLabel);
            julyFigureContainer.appendChild(julyPageviews);

            // Arrow & Percentage
            const arrowContainer = document.createElement('div');
            arrowContainer.className = 'flex flex-col items-center gap-2';
            const percentageText = document.createElement('span');
            percentageText.className = `text-sm font-bold ${changeColor}`;
            percentageText.textContent = `${item.percentageChange.toFixed(1)}%`;
            const arrowSvgElement = createSvgElementFromString(arrowSVG);
            arrowContainer.appendChild(percentageText);
            arrowContainer.appendChild(arrowSvgElement);

            // August Figure using evolution emoji
            const augustFigureContainer = document.createElement('div');
            augustFigureContainer.className = 'evolution-figure-container';
            const augustLabel = document.createElement('span');
            augustLabel.textContent = 'August 2025';
            const augustPageviews = document.createElement('span');
            augustPageviews.className = 'text-sm font-semibold';
            augustPageviews.textContent = item.augustPageview.toLocaleString();
            const augustEmojiElement = document.createElement('span');
            augustEmojiElement.textContent = getEvolutionEmoji(item.percentageChange);
            augustEmojiElement.className = 'text-4xl';
            augustFigureContainer.appendChild(augustEmojiElement);
            augustFigureContainer.appendChild(augustLabel);
            augustFigureContainer.appendChild(augustPageviews);
            
            figuresContainer.appendChild(julyFigureContainer);
            figuresContainer.appendChild(arrowContainer);
            figuresContainer.appendChild(augustFigureContainer);

            const title = document.createElement('h3');
            title.className = 'text-lg font-semibold';
            title.textContent = `${item.name}'s Pageview ${changeType}`;
            
            evolutionItem.appendChild(title);
            evolutionItem.appendChild(figuresContainer);

            evolutionContainer.appendChild(evolutionItem);
        });
    }

    // Sort data based on September percentage in descending order
    data.sort((a, b) => (b.septemberPageview / b.pageview) - (a.septemberPageview / a.pageview));

    const progressContainer = document.getElementById('progress-container');
    const evolutionContainer = document.getElementById('evolution-container');

    data.forEach(renderProgressBar);
    renderEvolutionSummary();
</script>

</body>
</html>
